#!/usr/bin/env bash
# UserPromptSubmit Hook - Injects relevant context from memory
# Exit codes: 0 = success/continue

set -euo pipefail

# Get script directory
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Load environment if .env exists
if [ -f "$SCRIPT_DIR/.env" ]; then
    set -a
    source "$SCRIPT_DIR/.env"
    set +a
fi

# Execute TypeScript handler with tsx
exec npx --yes tsx "$SCRIPT_DIR/src/handlers/user-prompt-submit.ts"
