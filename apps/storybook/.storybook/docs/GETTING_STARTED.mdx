import { Meta } from '@storybook/blocks';

<Meta title="Documentation/Getting Started" />

# Getting Started with Storybook

Welcome to the Ozean Licht Ecosystem Storybook! This guide will help you navigate and use our component library effectively.

## What is This Storybook?

This Storybook serves as the unified component documentation and testing platform for the entire Ozean Licht ecosystem, including:

- **Shared UI Library**: Reusable components used across all applications
- **Admin Dashboard**: Administrative interface components
- **Ozean Licht Platform**: Public-facing components
- **Kids Ascension**: Educational platform components

## Quick Navigation

### By Application

- **Shared UI/** - Core primitives and compositions (Button, Card, Alert, Dialog, Tabs, etc.)
- **Admin/** - Admin dashboard components (DataTable, Forms, Dashboard, RBAC, Health)
- **Ozean Licht/** - Public website components
- **Kids Ascension/** - Educational platform components

### By Component Type

- **Primitives**: Basic building blocks (Button, Input, Checkbox, etc.)
- **Compositions**: Complex components built from primitives (Card, Dialog, Tabs)
- **Patterns**: Complete UI patterns (Forms, Tables, Navigation)

## Using Components

### Installation

All shared components are available via the `@ozean-licht/ui-components` package:

```typescript
import { Button, Card, Dialog } from '@ozean-licht/ui-components';
```

App-specific components import from their respective packages:

```typescript
// Admin components
import { DataTable } from '@/components/data-table';
import { StatusBadge } from '@/components/admin/status-badge';
```

### Basic Usage

Each component story includes:

1. **Default story** - Basic usage example
2. **Variant stories** - Different visual styles and states
3. **Interactive examples** - Real-world usage patterns
4. **Props table** - Auto-generated from TypeScript types

Example from Button component:

```tsx
import { Button } from '@ozean-licht/ui-components';

function MyComponent() {
  return (
    <Button variant="primary" size="lg" onClick={() => alert('Clicked!')}>
      Click Me
    </Button>
  );
}
```

### Variants

Most components support multiple variants for different contexts:

```tsx
// Button variants
<Button variant="primary">Primary Action</Button>
<Button variant="secondary">Secondary Action</Button>
<Button variant="destructive">Delete</Button>
<Button variant="ghost">Subtle Action</Button>
<Button variant="cta" glow>Call to Action</Button>

// Card variants
<Card variant="default">Standard glass effect</Card>
<Card variant="strong">More prominent</Card>
<Card variant="subtle">Minimal effect</Card>
<Card variant="solid">No transparency</Card>
```

### Sizes

Components typically support 3-4 size options:

```tsx
<Button size="sm">Small</Button>
<Button size="md">Medium (default)</Button>
<Button size="lg">Large</Button>
<Button size="icon"><IconComponent /></Button>
```

## Component Composition

Many components are designed to work together:

### Dialog Example

```tsx
<Dialog>
  <DialogTrigger asChild>
    <Button>Open Dialog</Button>
  </DialogTrigger>
  <DialogContent>
    <DialogHeader>
      <DialogTitle>Dialog Title</DialogTitle>
      <DialogDescription>Description text</DialogDescription>
    </DialogHeader>
    {/* Dialog body content */}
    <DialogFooter>
      <Button variant="outline">Cancel</Button>
      <Button>Confirm</Button>
    </DialogFooter>
  </DialogContent>
</Dialog>
```

### Card with Complex Content

```tsx
<Card hover glow>
  <CardHeader>
    <CardTitle>Stats Overview</CardTitle>
    <CardDescription>Your performance this month</CardDescription>
  </CardHeader>
  <CardContent>
    <div className="space-y-4">
      {/* Content here */}
    </div>
  </CardContent>
  <CardFooter>
    <Button fullWidth>View Details</Button>
  </CardFooter>
</Card>
```

## Theming

### Light and Dark Mode

All components support both light and dark themes. Use the theme toolbar (top bar) to toggle:

- ‚òÄÔ∏è Light Mode
- üåô Dark Mode

### Entity Context

For multi-tenant components, use the Entity toolbar to switch between:

- Admin
- Kids Ascension
- Ozean Licht

## Accessibility

All components in this library are built with accessibility in mind:

- ‚úÖ **Keyboard Navigation**: All interactive components are keyboard accessible
- ‚úÖ **Screen Reader Support**: Proper ARIA labels and roles
- ‚úÖ **Focus Management**: Visible focus indicators
- ‚úÖ **Color Contrast**: WCAG AA compliance

Use the **Accessibility** addon panel to check for issues in any story.

## Interactive Testing

Some stories include **play functions** that demonstrate interactions:

1. Click the "Play" button in the story
2. Watch automated interactions
3. Review test assertions in the Interactions panel

Components with play functions:
- Tabs (keyboard navigation)
- Accordion (expand/collapse)
- Dialog (open/close, keyboard)
- Checkbox (state changes)
- DataTable (sort, filter, paginate)

## Best Practices

### Do's ‚úÖ

- Use semantic variants (`primary`, `destructive`) over custom styling
- Compose components following examples in stories
- Leverage TypeScript types for prop validation
- Use accessibility features (aria-labels, etc.)
- Follow established patterns from real-world examples

### Don'ts ‚ùå

- Don't override core component styles with !important
- Don't bypass TypeScript prop types
- Don't create custom variants when existing ones suffice
- Don't ignore accessibility warnings

## Development Workflow

### Running Storybook Locally

```bash
# Install dependencies
pnpm install

# Start Storybook
pnpm storybook

# Build static Storybook
pnpm build-storybook
```

### Creating New Stories

1. Create a `.stories.tsx` file next to your component
2. Follow the CSF 3.0 format (see existing stories)
3. Include at least 3-5 variant stories
4. Add prop controls and documentation
5. Test in both light and dark themes

Template:

```tsx
import type { Meta, StoryObj } from '@storybook/react';
import { YourComponent } from './your-component';

const meta = {
  title: 'Category/YourComponent',
  component: YourComponent,
  parameters: {
    layout: 'centered',
  },
  tags: ['autodocs'],
} satisfies Meta<typeof YourComponent>;

export default meta;
type Story = StoryObj<typeof meta>;

export const Default: Story = {
  args: {
    // Your props here
  },
};
```

## Testing & Quality Assurance (Phase 3)

### Automated Testing

We use a comprehensive testing strategy to ensure component quality:

#### 1. Unit Tests with Vitest

Run portable story tests to verify components render correctly:

```bash
# Run all tests
npm test

# Run tests in watch mode
npm test -- --watch

# Run tests with UI
npm run test:ui

# Generate coverage report
npm run test:coverage
```

**What's tested:**
- Component rendering (smoke tests)
- Different states and variants
- Props and args validation
- Accessibility basics

See [Testing Guide](/?path=/docs/testing-testing-guide--docs) for detailed instructions.

#### 2. Visual Regression with Chromatic

Chromatic automatically captures visual snapshots of all stories and detects changes:

- **Automated**: Runs on every GitHub PR
- **TurboSnap**: Only tests changed components (80% cost savings)
- **Multi-browser**: Chrome, Firefox, Safari, Edge
- **Review UI**: Visual diff comparison in dashboard

```bash
# Run Chromatic locally (requires CHROMATIC_PROJECT_TOKEN)
npm run chromatic
```

#### 3. Accessibility Audits

All stories are automatically checked for WCAG 2.1 AA compliance:

- **Automated checks**: Color contrast, ARIA attributes, semantic HTML
- **Manual checks**: Keyboard navigation, screen reader testing
- **Real-time feedback**: Accessibility panel in Storybook

Use the **Accessibility** tab to see violations and fixes needed.

### Design Tokens (Phase 3)

Design tokens are now centrally managed and automatically generated:

```bash
# Build design tokens
npm run build:tokens
```

**Token Categories:**
- Colors (primary, background, semantic)
- Typography (fonts, sizes, weights)
- Spacing (8px base unit)
- Border radius
- Shadows and effects
- Glass morphism variables
- Animations

**Using tokens in components:**

```tsx
import tokens from '../tokens/build/js/tokens.js';

// Or use CSS variables
<div style={{
  backgroundColor: 'var(--ozean-licht-color-primary-500)',
  padding: 'var(--ozean-licht-spacing-4)',
}}>
```

**Token files:**
- `tokens/design-tokens.json` - Source of truth
- `tokens/build/css/variables.css` - CSS custom properties
- `tokens/build/js/tokens.js` - JavaScript/TypeScript exports
- `tokens/build/json/tokens.json` - Flat JSON format

### Quality Checklist

Before submitting a component:

```markdown
- [ ] Story renders in Storybook
- [ ] Accessibility panel shows no violations
- [ ] Unit tests pass (npm test)
- [ ] Uses design tokens (not hardcoded values)
- [ ] Visual regression reviewed in Chromatic
- [ ] Documented with stories and JSDoc
- [ ] Props table auto-generated
- [ ] Works in light and dark themes
```

## Getting Help

- **Testing Guide**: See [Testing Guide](/?path=/docs/testing-testing-guide--docs)
- **GitHub Issues**: Report bugs or request features
- **Storybook Docs**: Each component has auto-generated documentation
- **Component Guidelines**: See [Component Guidelines](/?path=/docs/documentation-component-guidelines--docs)
- **Design Tokens**: See [Design Tokens](/?path=/docs/documentation-design-tokens--docs)

## Next Steps

- Explore the component library by category
- Check out real-world examples in story showcase sections
- Read the [Component Guidelines](/?path=/docs/documentation-component-guidelines--docs)
- Learn about [Design Tokens](/?path=/docs/documentation-design-tokens--docs)
- Review the [Testing Guide](/?path=/docs/testing-testing-guide--docs)
- Review the [Migration Guide](/?path=/docs/documentation-migration-guide--docs) if upgrading

---

**Version**: 3.0 (Phase 3 Complete - Testing & Automation)
**Last Updated**: 2025-11-12
**Component Count**: 60+
**Test Coverage**: 100% story smoke tests
**Accessibility**: WCAG 2.1 AA compliant
