# Storybook AI Addon / Chat with Claude Agent SDK

**Query:** AI addon chat integration
**Timestamp:** 2025-11-17T08:22:14.631Z
**Library:** /storybookjs/storybook/v9.0.15

---

### Register Storybook Addons in main.js

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/addons/writing-presets.mdx

Illustrates how to use the `addons` API within the Storybook `main.js` configuration to automatically load specified addon names, simplifying addon integration and supporting references to additional presets.

```JavaScript
// .storybook/main.js

module.exports = {
  stories: ['../src/**/*.stories.mdx', '../src/**/*.stories.@(js|jsx|ts|tsx)'],
  addons: [
    '@storybook/addon-links',
    '@storybook/addon-essentials',
    '@storybook/addon-interactions'
    // Registering a custom local addon or preset
    // './my-custom-addon/preset.js',
    // Or a path to a local preset
    // require.resolve('./my-local-preset'),
  ],
  framework: '@storybook/react',
  core: {
    builder: '@storybook/builder-webpack5'
  }
};
```

--------------------------------

### Configure Storybook A11y Addon with Vitest Test Addon

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/MIGRATION.md

This code snippet shows how to manually integrate the Accessibility addon (@storybook/addon-a11y) with the experimental Test addon (@storybook/experimental-addon-test) in Storybook 8.5. It involves importing a11yAddonAnnotations and adding them to the setProjectAnnotations array in your .storybook/vitest.setup.ts file, ensuring accessibility tests run alongside component tests.

```diff
// .storybook/vitest.setup.ts
...
+import * as a11yAddonAnnotations from '@storybook/addon-a11y/preview';

const annotations = setProjectAnnotations([
  previewAnnotations,
+ a11yAddonAnnotations,
]);

// Run Storybook's beforeAll hook
beforeAll(annotations.beforeAll);
```

--------------------------------

### Communicating with Manager and Preview via addons.getChannel()

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/addons/addons-api.mdx

The `addons.getChannel()` method provides an instance of an EventEmitter-compatible channel, enabling communication between the Storybook manager and preview environments by emitting and listening to events.

```APIDOC
addons.getChannel(): EventEmitter
  Returns: An EventEmitter compatible instance for inter-component communication.
```

--------------------------------

### Configure Ember CLI Storybook Addon Docs Integration

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/storybook-ember-cli-build.md

This JavaScript snippet demonstrates how to enable the `enableAddonDocsIntegration` option for the `@storybook/ember-cli-storybook` addon within an `ember-cli-build.js` file. This setting allows Storybook to integrate with and display documentation generated by other Ember addons, enhancing the documentation experience.

```JavaScript
'use strict';

const EmberApp = require('ember-cli/lib/broccoli/ember-app');

module.exports = function (defaults) {
  const app = new EmberApp(defaults, {
    '@storybook/ember-cli-storybook': {
      enableAddonDocsIntegration: true,
    },
  });

  return app.toTree();
};
```

--------------------------------

### Define integration catalog metadata in Storybook addon package.json

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/addons/writing-addons.mdx

Specifies metadata for the Storybook integration catalog, including display name, unsupported frameworks, icon URL, and keywords for searchability and categorization within the Storybook integrations.

```json
{
  "name": "my-storybook-addon",
  "version": "1.0.0",
  "description": "My first storybook addon",
  "author": "Your Name",
  "storybook": {
    "displayName": "My Storybook Addon",
    "unsupportedFrameworks": ["react-native"],
    "icon": "https://yoursite.com/link-to-your-icon.png"
  },
  "keywords": ["storybook-addons", "appearance", "style", "css", "layout", "debug"]
}
```

--------------------------------

### Registering an Addon with addons.register()

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/addons/addons-api.mdx

The `addons.register()` method serves as the entry point for all addons, allowing you to register an addon and gain access to the Storybook API instance.

```APIDOC
addons.register(addonId: string, callback: (api: StorybookAPI) => void): void
  addonId: A unique identifier for the addon.
  callback: A function that receives the StorybookAPI instance.
```

--------------------------------

### Example package.json for Storybook Addon Catalog Listing

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/addons/integration-catalog.mdx

A practical example of a `package.json` file configured for a Storybook addon, demonstrating how to include the necessary metadata and the `storybook` property to ensure proper listing and display in the integration catalog.

```JSON
{
  "name": "storybook-addon-example",
  "version": "1.0.0",
  "description": "Outline all elements with CSS to help with layout placement and alignment",
  "repository": {
    "type": "git",
    "url": "https://github.com/chromaui/storybook-addon-example"
  },
  "author": "winkerVSbecks",
  "keywords": ["storybook-addons", "style", "debug", "layout", "css"],
  "storybook": {
    "displayName": "Outline",
    "unsupportedFrameworks": ["vue"],
    "supportedFrameworks": ["react", "angular"],
    "icon": "https://yoursite.com/addon-icon.png"
  }
}
```

--------------------------------

### Storybook Addon Panel with State and Channel Communication

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/storybook-addon-toolkit-types.md

This snippet illustrates how to create a custom panel for a Storybook addon. It utilizes `useAddonState` to manage the panel's internal state and `useChannel` for inter-addon communication (emitting and listening to events). The panel displays results and provides functions to request and clear data, demonstrating a common pattern for dynamic addon content.

```tsx
import React from 'react';

import { useAddonState, useChannel } from 'storybook/manager-api';
import { AddonPanel } from 'storybook/internal/components';

import { ADDON_ID, EVENTS } from './constants';

// See https://github.com/storybookjs/addon-kit/blob/main/src/components/PanelContent.tsx for an example of a PanelContent component
import { PanelContent } from './components/PanelContent';

interface PanelProps {
  active: boolean;
}

export const Panel: React.FC<PanelProps> = (props) => {
  // https://storybook.js.org/docs/addons/addons-api#useaddonstate
  const [results, setState] = useAddonState(ADDON_ID, {
    danger: [],
    warning: [],
  });

  // https://storybook.js.org/docs/addons/addons-api#usechannel
  const emit = useChannel({
    [EVENTS.RESULT]: (newResults) => setState(newResults),
  });

  return (
    <AddonPanel {...props}>
      <PanelContent
        results={results}
        fetchData={() => {
          emit(EVENTS.REQUEST);
        }}
        clearData={() => {
          emit(EVENTS.CLEAR);
        }}
      />
    </AddonPanel>
  );
};

```

--------------------------------

### Registering UI Components with addons.add()

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/addons/addons-api.mdx

The `addons.add()` method registers a UI component type for an addon, such as panels, toolbars, or tabs. It requires a type, title, and a render function.

```APIDOC
addons.add(type: string, title: string, render: Function): void
  type: The type of UI component to register (e.g., 'panel', 'toolbar', 'tab').
  title: The title to feature in the Addon Panel.
  render: The function that renders the addon's UI component.
    - Called with 'active' (boolean): true when the panel is focused.
```

--------------------------------

### Storybook Addon package.json Metadata Specification

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/addons/integration-catalog.mdx

Detailed specification of the `package.json` fields required for Storybook addons to be discoverable and correctly displayed in the integration catalog. This includes general package information and specific `storybook` property fields for custom display options.

```APIDOC
package.json fields for Storybook Addons:
  name (string): Addon package name. Example: storybook-addon-example
  description (string): Addon description. Example: Outline all elements with CSS to help with layout placement and alignment
  author (string): Name of the author. Example: winkerVSbecks
  keywords (array of string): List of keywords to describe the addon. Must include "storybook-addons" as the first keyword, followed by the addon's category. Additional keywords are used for search and tags. Example: ["storybook-addons","style","debug"]
  repository (object): Addon repository details.
    type (string): Type of repository. Example: "git"
    url (string): URL of the repository. Example: "https://github.com/someone/my-addon"

  storybook (object): Custom property to customize addon's appearance in the catalog.
    displayName (string): Display name for the addon. Example: Example
    icon (string): Link to custom icon for the addon. SVG are not supported. Example: https://yoursite.com/addon-icon.png
    unsupportedFrameworks (array of string): List of frameworks not supported by the addon. Use exact names: react, vue, angular, web-components, ember, html, svelte, preact, react-native. Example: ["vue"]
    supportedFrameworks (array of string): List of frameworks supported by the addon. Use exact names: react, vue, angular, web-components, ember, html, svelte, preact, react-native. Example: ["react", "angular"]
```