# Storybook AI Addon / Chat with Claude Agent SDK

**Query:** AI addon chat integration
**Timestamp:** 2025-11-16T19:37:32.703Z
**Library:** /storybookjs/storybook/v9.0.15

---

### Register Storybook Addons in main.js

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/addons/writing-presets.mdx

Illustrates how to use the `addons` API within the Storybook `main.js` configuration to automatically load specified addon names, simplifying addon integration and supporting references to additional presets.

```JavaScript
// .storybook/main.js

module.exports = {
  stories: ['../src/**/*.stories.mdx', '../src/**/*.stories.@(js|jsx|ts|tsx)'],
  addons: [
    '@storybook/addon-links',
    '@storybook/addon-essentials',
    '@storybook/addon-interactions'
    // Registering a custom local addon or preset
    // './my-custom-addon/preset.js',
    // Or a path to a local preset
    // require.resolve('./my-local-preset'),
  ],
  framework: '@storybook/react',
  core: {
    builder: '@storybook/builder-webpack5'
  }
};
```

--------------------------------

### Configure Storybook A11y Addon with Vitest Test Addon

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/MIGRATION.md

This code snippet shows how to manually integrate the Accessibility addon (@storybook/addon-a11y) with the experimental Test addon (@storybook/experimental-addon-test) in Storybook 8.5. It involves importing a11yAddonAnnotations and adding them to the setProjectAnnotations array in your .storybook/vitest.setup.ts file, ensuring accessibility tests run alongside component tests.

```diff
// .storybook/vitest.setup.ts
...
+import * as a11yAddonAnnotations from '@storybook/addon-a11y/preview';

const annotations = setProjectAnnotations([
  previewAnnotations,
+ a11yAddonAnnotations,
]);

// Run Storybook's beforeAll hook
beforeAll(annotations.beforeAll);
```

--------------------------------

### Registering an Addon with addons.register()

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/addons/addons-api.mdx

The `addons.register()` method serves as the entry point for all addons, allowing you to register an addon and gain access to the Storybook API instance.

```APIDOC
addons.register(addonId: string, callback: (api: StorybookAPI) => void): void
  addonId: A unique identifier for the addon.
  callback: A function that receives the StorybookAPI instance.
```

--------------------------------

### Configure Ember CLI Storybook Addon Docs Integration

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/storybook-ember-cli-build.md

This JavaScript snippet demonstrates how to enable the `enableAddonDocsIntegration` option for the `@storybook/ember-cli-storybook` addon within an `ember-cli-build.js` file. This setting allows Storybook to integrate with and display documentation generated by other Ember addons, enhancing the documentation experience.

```JavaScript
'use strict';

const EmberApp = require('ember-cli/lib/broccoli/ember-app');

module.exports = function (defaults) {
  const app = new EmberApp(defaults, {
    '@storybook/ember-cli-storybook': {
      enableAddonDocsIntegration: true,
    },
  });

  return app.toTree();
};
```

--------------------------------

### Example package.json for Storybook Addon Catalog Listing

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/addons/integration-catalog.mdx

A practical example of a `package.json` file configured for a Storybook addon, demonstrating how to include the necessary metadata and the `storybook` property to ensure proper listing and display in the integration catalog.

```JSON
{
  "name": "storybook-addon-example",
  "version": "1.0.0",
  "description": "Outline all elements with CSS to help with layout placement and alignment",
  "repository": {
    "type": "git",
    "url": "https://github.com/chromaui/storybook-addon-example"
  },
  "author": "winkerVSbecks",
  "keywords": ["storybook-addons", "style", "debug", "layout", "css"],
  "storybook": {
    "displayName": "Outline",
    "unsupportedFrameworks": ["vue"],
    "supportedFrameworks": ["react", "angular"],
    "icon": "https://yoursite.com/addon-icon.png"
  }
}
```

--------------------------------

### Storybook Addon package.json Metadata Specification

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/addons/integration-catalog.mdx

Detailed specification of the `package.json` fields required for Storybook addons to be discoverable and correctly displayed in the integration catalog. This includes general package information and specific `storybook` property fields for custom display options.

```APIDOC
package.json fields for Storybook Addons:
  name (string): Addon package name. Example: storybook-addon-example
  description (string): Addon description. Example: Outline all elements with CSS to help with layout placement and alignment
  author (string): Name of the author. Example: winkerVSbecks
  keywords (array of string): List of keywords to describe the addon. Must include "storybook-addons" as the first keyword, followed by the addon's category. Additional keywords are used for search and tags. Example: ["storybook-addons","style","debug"]
  repository (object): Addon repository details.
    type (string): Type of repository. Example: "git"
    url (string): URL of the repository. Example: "https://github.com/someone/my-addon"

  storybook (object): Custom property to customize addon's appearance in the catalog.
    displayName (string): Display name for the addon. Example: Example
    icon (string): Link to custom icon for the addon. SVG are not supported. Example: https://yoursite.com/addon-icon.png
    unsupportedFrameworks (array of string): List of frameworks not supported by the addon. Use exact names: react, vue, angular, web-components, ember, html, svelte, preact, react-native. Example: ["vue"]
    supportedFrameworks (array of string): List of frameworks supported by the addon. Use exact names: react, vue, angular, web-components, ember, html, svelte, preact, react-native. Example: ["react", "angular"]
```

--------------------------------

### Storybook Core Addon API Packages

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/addons/addons-api.mdx

Storybook's core addon API is exposed via two distinct packages: `storybook/manager-api` for interacting with the manager UI and `storybook/preview-api` for controlling addon behavior.

```APIDOC
Packages:
  storybook/manager-api: Used to interact with the Storybook manager UI or access the Storybook API.
  storybook/preview-api: Used to control and configure the addon's behavior.
```

--------------------------------

### Addon Registration `match` Property

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/addons/writing-addons.mdx

Defines how to conditionally render a Storybook toolbar addon based on the current view mode or tab. This property allows fine-grained control over when an addon is visible to the user.

```APIDOC
match: ({ tabId: string | undefined, viewMode: 'story' | 'docs' | undefined }) => boolean
  Description: A function that determines if the addon should be visible.
  Parameters:
    tabId: string | undefined - The ID of the current tab, if applicable (e.g., 'my-addon/tab').
    viewMode: 'story' | 'docs' | undefined - The current view mode ('story' for canvas, 'docs' for documentation).
  Examples:
    ({ tabId }) => tabId === 'my-addon/tab' - Shows addon when viewing the tab with the ID 'my-addon/tab'.
    ({ viewMode }) => viewMode === 'story' - Shows addon when viewing a story in the canvas.
    ({ viewMode }) => viewMode === 'docs' - Shows addon when viewing the documentation for a component.
    ({ tabId, viewMode }) => !tabId && viewMode === 'story' - Shows addon when viewing a story in the canvas and not in a custom tab (i.e., when `tabId` is undefined).
```

--------------------------------

### Install Storybook Designs Addon

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/sharing/design-integrations.mdx

Command-line instruction to install the `@storybook/addon-designs` package, which enables embedding Figma files directly into Storybook. This typically uses a package manager like npm or yarn via the Storybook CLI's `add` command.

```shell
npx storybook add @storybook/addon-designs
```

--------------------------------

### Define integration catalog metadata in Storybook addon package.json

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/addons/writing-addons.mdx

Specifies metadata for the Storybook integration catalog, including display name, unsupported frameworks, icon URL, and keywords for searchability and categorization within the Storybook integrations.

```json
{
  "name": "my-storybook-addon",
  "version": "1.0.0",
  "description": "My first storybook addon",
  "author": "Your Name",
  "storybook": {
    "displayName": "My Storybook Addon",
    "unsupportedFrameworks": ["react-native"],
    "icon": "https://yoursite.com/link-to-your-icon.png"
  },
  "keywords": ["storybook-addons", "appearance", "style", "css", "layout", "debug"]
}
```

--------------------------------

### Registering a Storybook Manager Addon

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/storybook-addons-api-selectincurrentkind.md

This snippet shows how to register a manager-side Storybook addon. The `addons.register` function takes a unique ID for the addon and a callback function. The callback receives the Storybook API object, which can be used to interact with the Storybook UI and data, such as programmatically selecting a story.

```JavaScript
addons.register('my-organisation/my-addon', (api) => {
  api.selectInCurrentKind('Default');
});
```

--------------------------------

### Install Storybook Addon Automatically with CLI

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/addons/install-addons.mdx

Use the `storybook add` command to automatically install and configure Storybook addons. This command updates your Storybook configuration and installs necessary dependencies. Note that it currently only processes the first specified addon.

```Shell
npx storybook add <addon-name>
```

--------------------------------

### Register Storybook Addon Manually in main.js/ts

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/addons/install-addons.mdx

After installing an addon, register it in your Storybook configuration file (`.storybook/main.js` or `.storybook/main.ts`) by adding it to the `addons` array. This enables the addon within your Storybook instance.

```JavaScript
/** @type { import('@storybook/main').StorybookConfig } */
const config = {
  addons: ['@storybook/addon-a11y'],
  // ... other configurations
};
module.exports = config;
```

--------------------------------

### Storybook Addon Tool Component with Global State and Shortcut

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/storybook-addon-tool-initial-setup.md

This TypeScript React component (`Tool.tsx`) integrates with Storybook's manager API to create an interactive tool. It uses `useGlobals` to read and update a global parameter (`PARAM_KEY`), which controls the addon's active state. The `useStorybookApi` hook is utilized to register a keyboard shortcut ('8') that triggers the `toggleMyTool` function, changing the global state. An `IconButton` is rendered, visually indicating the addon's active status and providing a click handler to toggle it.

```tsx
import React, { memo, useCallback, useEffect } from 'react';

import { useGlobals, useStorybookApi } from 'storybook/manager-api';
import { IconButton } from 'storybook/internal/components';
import { LightningIcon } from '@storybook/icons';

import { ADDON_ID, PARAM_KEY, TOOL_ID } from './constants';

export const Tool = memo(function MyAddonSelector() {
  const [globals, updateGlobals] = useGlobals();
  const api = useStorybookApi();

  const isActive = [true, 'true'].includes(globals[PARAM_KEY]);

  const toggleMyTool = useCallback(() => {
    updateGlobals({
      [PARAM_KEY]: !isActive,
    });
  }, [isActive]);

  useEffect(() => {
    api.setAddonShortcut(ADDON_ID, {
      label: 'Toggle Addon [8]',
      defaultShortcut: ['8'],
      actionName: 'myaddon',
      showInMenu: false,
      action: toggleMyTool,
    });
  }, [toggleMyTool, api]);

  return (
    <IconButton key={TOOL_ID} active={isActive} title="Enable my addon" onClick={toggleMyTool}>
      <LightningIcon />
    </IconButton>
  );
});
```

--------------------------------

### Storybook Addon Panel with State and Channel Communication

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/storybook-addon-toolkit-types.md

This snippet illustrates how to create a custom panel for a Storybook addon. It utilizes `useAddonState` to manage the panel's internal state and `useChannel` for inter-addon communication (emitting and listening to events). The panel displays results and provides functions to request and clear data, demonstrating a common pattern for dynamic addon content.

```tsx
import React from 'react';

import { useAddonState, useChannel } from 'storybook/manager-api';
import { AddonPanel } from 'storybook/internal/components';

import { ADDON_ID, EVENTS } from './constants';

// See https://github.com/storybookjs/addon-kit/blob/main/src/components/PanelContent.tsx for an example of a PanelContent component
import { PanelContent } from './components/PanelContent';

interface PanelProps {
  active: boolean;
}

export const Panel: React.FC<PanelProps> = (props) => {
  // https://storybook.js.org/docs/addons/addons-api#useaddonstate
  const [results, setState] = useAddonState(ADDON_ID, {
    danger: [],
    warning: [],
  });

  // https://storybook.js.org/docs/addons/addons-api#usechannel
  const emit = useChannel({
    [EVENTS.RESULT]: (newResults) => setState(newResults),
  });

  return (
    <AddonPanel {...props}>
      <PanelContent
        results={results}
        fetchData={() => {
          emit(EVENTS.REQUEST);
        }}
        clearData={() => {
          emit(EVENTS.CLEAR);
        }}
      />
    </AddonPanel>
  );
};

```

--------------------------------

### Configure Storybook main.js for Docs Addon

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/code/addons/docs/common/README.md

Integrates the `@storybook/addon-docs` into your Storybook configuration by adding it to the `addons` array in `.storybook/main.js`. This step activates the documentation features within Storybook.

```js
export default {
  addons: ['@storybook/addon-docs'],
};
```

--------------------------------

### Register Storybook Manager Addons with preset.js

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/storybook-addons-root-preset-manager-entries.md

This JavaScript snippet demonstrates how to extend the `managerEntries` array in a Storybook `preset.js` file to register a manager-level addon. The `require.resolve` function is used to ensure the correct path to the third-party addon is included. This allows Storybook to load and initialize the addon in the manager UI.

```JavaScript
export const managerEntries = (entry = []) => {
  return [...entry, require.resolve('path-to-third-party-addon')];
};
```

--------------------------------

### Registering a Storybook Manager Addon

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/storybook-addons-api-register.md

This snippet shows the basic structure for registering a new addon with Storybook's manager UI. The `addons.register` function takes a unique ID for the addon and a callback function that receives the Storybook API object.

```JavaScript
import { addons } from 'storybook/preview-api';

// Register the addon with a unique name.
addons.register('my-organisation/my-addon', (api) => {});
```

--------------------------------

### Configure Storybook Highlight Addon with Decorators

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/highlight-menu.md

Demonstrates how to integrate the Storybook Highlight addon into stories using decorators. It utilizes `useChannel` to emit `HIGHLIGHT` events, allowing developers to specify CSS selectors for visual highlighting and define interactive menu items with titles, descriptions, and optional click events. Examples are provided for Svelte, Vue, and Web Components frameworks using both JavaScript and TypeScript.

```svelte
<script module>
  import { defineMeta } from '@storybook/addon-svelte-csf';

  import { useChannel } from 'storybook/preview-api';
  import { HIGHLIGHT } from 'storybook/highlight';

  import MyComponent from './MyComponent.svelte';

  const { Story } = defineMeta({
    component: MyComponent,
  });
</script>

<Story
  name="StyledHighlight"
  decorators={[
    (storyFn) => {
      const emit = useChannel({});
      emit(HIGHLIGHT, {
        selectors: ['h2', 'a', '.storybook-button'],
        menu: [
          [
            {
              id: 'button-name',
              title: 'Login',
              description: 'Navigate to the login page',
              clickEvent: 'my-menu-click-event',
            },
            {
              id: 'h2-home',
              title: 'Acme',
              description: 'Navigate to the home page',
            },
          ]
        ],
      });
      return storyFn();
    },
  ]}
/>
```

```ts
// Replace your-framework with svelte-vite or sveltekit
import type { Meta, StoryObj } from '@storybook/your-framework';

import { useChannel } from 'storybook/preview-api';
import { HIGHLIGHT } from 'storybook/highlight';

import MyComponent from './MyComponent.svelte';

const meta = {
  component: MyComponent,
} satisfies Meta<typeof MyComponent>;

export default meta;
type Story = StoryObj<typeof meta>;

export const StyledHighlight: Story = {
  decorators: [
    (storyFn) => {
      const emit = useChannel({});
      emit(HIGHLIGHT, {
        selectors: ['h2', 'a', '.storybook-button'],
        menu: [
          [
            {
              id: 'button-name',
              title: 'Login',
              description: 'Navigate to the login page',
              clickEvent: 'my-menu-click-event',
            },
            {
              id: 'h2-home',
              title: 'Acme',
              description: 'Navigate to the home page',
            },
          ],
        ],
      });
      return storyFn();
    },
  ],
};
```

```js
import { useChannel } from 'storybook/preview-api';
import { HIGHLIGHT } from 'storybook/highlight';

import MyComponent from './MyComponent.vue';

export default {
  component: MyComponent,
};

export const StyledHighlight = {
  decorators: [
    () => {
      const emit = useChannel({});
      emit(HIGHLIGHT, {
        selectors: ['h2', 'a', '.storybook-button'],
        menu: [
          [
            {
              id: 'button-name',
              title: 'Login',
              description: 'Navigate to the login page',
              clickEvent: 'my-menu-click-event',
            },
            {
              id: 'h2-home',
              title: 'Acme',
              description: 'Navigate to the home page',
            },
          ],
        ],
      });
      return {
        template: '<story />',
      };
    },
  ],
};
```

```ts
import type { Meta, StoryObj } from '@storybook/vue3-vite';

import { useChannel } from 'storybook/preview-api';
import { HIGHLIGHT } from 'storybook/highlight';

import MyComponent from './MyComponent.vue';

const meta = {
  component: MyComponent,
} satisfies Meta<typeof MyComponent>;

export default meta;
type Story = StoryObj<typeof meta>;

export const StyledHighlight: Story = {
  decorators: [
    () => {
      const emit = useChannel({});
      emit(HIGHLIGHT, {
        selectors: ['h2', 'a', '.storybook-button'],
        menu: [
          [
            {
              id: 'button-name',
              title: 'Login',
              description: 'Navigate to the login page',
              clickEvent: 'my-menu-click-event',
            },
            {
              id: 'h2-home',
              title: 'Acme',
              description: 'Navigate to the home page',
            },
          ],
        ],
      });
      return {
        template: '<story />',
      };
    },
  ],
};
```

```js
import { useChannel } from 'storybook/preview-api';
import { HIGHLIGHT } from 'storybook/highlight';

export default {
  component: 'my-component',
};

export const StyledHighlight = {
  decorators: [
    (story) => {
      const emit = useChannel({});
      emit(HIGHLIGHT, {
        selectors: ['h2', 'a', '.storybook-button'],
        menu: [
          [
            {
              id: 'button-name',
              title: 'Login',
              description: 'Navigate to the login page',
              clickEvent: 'my-menu-click-event',
            },
            {
              id: 'h2-home',
```

--------------------------------

### Add Storybook Vitest Addon

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/addon-test-install.md

Installs the @storybook/addon-vitest package into your Storybook project. This addon integrates Vitest testing capabilities directly into Storybook, allowing you to view test results alongside your components.

```Shell
npx storybook add @storybook/addon-vitest
```

```Shell
pnpm exec storybook add @storybook/addon-vitest
```

```Shell
yarn exec storybook add @storybook/addon-vitest
```

--------------------------------

### Registering a Storybook Tool Addon with Tab ID Filtering

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/MIGRATION.md

Illustrates how to register a TOOL type addon that can filter its visibility based on the current `tabId`. The `match` function receives `tabId`, allowing the addon to show or hide its content conditionally.

```tsx
import { addons, types } from "@storybook/manager-api";

addons.register("my-addon", () => {
  addons.add("my-addon/tool", {
    type: types.TOOL,
    title: "My Addon",
    match: ({ tabId }) => tabId === "my-addon/tab",
    render: () => <div>ðŸ‘€</div>
  });
});
```

--------------------------------

### Configure Storybook to enable Accessibility Addon

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/addon-a11y-register.md

This configuration snippet demonstrates how to add the `@storybook/addon-a11y` to your Storybook project. By including this addon in the `addons` array within your `.storybook/main.js` or `.storybook/main.ts` file, you enable automated accessibility checks for your stories.

```js
export default {
  // Replace your-framework with the framework you are using (e.g., react-vite, vue3-vite, angular, etc.)
  framework: '@storybook/your-framework',
  stories: ['../src/**/*.mdx', '../src/**/*.stories.@(js|jsx|mjs|ts|tsx)'],
  addons: [
    // Other Storybook addons
    '@storybook/addon-a11y' //ðŸ‘ˆ The a11y addon goes here
  ]
};
```

```ts
// Replace your-framework with the framework you are using (e.g., react-vite, vue3-vite, angular, etc.)
import type { StorybookConfig } from '@storybook/your-framework';

const config: StorybookConfig = {
  framework: '@storybook/your-framework',
  stories: ['../src/**/*.mdx', '../src/**/*.stories.@(js|jsx|mjs|ts|tsx)'],
  addons: [
    // Other Storybook addons
    '@storybook/addon-a11y' //ðŸ‘ˆ The a11y addon goes here
  ]
};

export default config;
```

--------------------------------

### Configure Storybook main.js to Enable Docs Addon

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/code/addons/docs/ember/README.md

Integrates the `@storybook/addon-docs` into your Storybook configuration by adding it to the `addons` array in `.storybook/main.js`. This step activates the documentation features within Storybook.

```JavaScript
export default {
  addons: ['@storybook/addon-docs']
};
```

--------------------------------

### Import Storybook Manager and Preview APIs for Addons

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/storybook-addons-api-imports.md

This code snippet shows the necessary imports for developing a Storybook manager-side addon. It imports `addons` from `storybook/preview-api` which is used for registering global Storybook features and `useStorybookApi` from `storybook/manager-api` which provides a React hook to access the Storybook API instance within manager UI components.

```JavaScript
import { addons } from 'storybook/preview-api';

import { useStorybookApi } from 'storybook/manager-api';
```

--------------------------------

### Registering UI Components with addons.add()

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/addons/addons-api.mdx

The `addons.add()` method registers a UI component type for an addon, such as panels, toolbars, or tabs. It requires a type, title, and a render function.

```APIDOC
addons.add(type: string, title: string, render: Function): void
  type: The type of UI component to register (e.g., 'panel', 'toolbar', 'tab').
  title: The title to feature in the Addon Panel.
  render: The function that renders the addon's UI component.
    - Called with 'active' (boolean): true when the panel is focused.
```

--------------------------------

### Add Storybook Addon Designs using npm, pnpm, or yarn

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/storybook-figma-addon-install.md

These commands demonstrate how to install the `@storybook/addon-designs` package into a Storybook project. They utilize `npx`, `pnpm dlx`, and `yarn dlx` to execute the `storybook` CLI, adding design integration capabilities to your Storybook instance.

```Shell
npx storybook@latest add @storybook/addon-designs
```

```Shell
pnpm dlx storybook@latest add @storybook/addon-designs
```

```Shell
yarn dlx storybook@latest add @storybook/addon-designs
```

--------------------------------

### Configure Storybook main.js with Docs Addon

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/code/addons/docs/vue/README.md

Integrates `@storybook/addon-docs` into your Storybook configuration by adding it to the `addons` array in the `.storybook/main.js` file. This step activates the documentation features within your Storybook instance.

```js
export default {
  addons: ['@storybook/addon-docs']
};
```

--------------------------------

### Add Storybook Webpack5 Compiler Babel Addon

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/storybook-addon-compiler-babel-auto-install.md

Commands to install the `@storybook/addon-webpack5-compiler-babel` addon, which integrates Webpack 5 compilation with Babel for Storybook projects. These commands use `npx`, `pnpm dlx`, and `yarn dlx` for execution without global installation.

```sh
npx storybook@latest add @storybook/addon-webpack5-compiler-babel
```

```sh
pnpm dlx storybook@latest add @storybook/addon-webpack5-compiler-babel
```

```sh
yarn dlx storybook@latest add @storybook/addon-webpack5-compiler-babel
```

--------------------------------

### Configure Storybook Addon Knobs in main.js (Storybook 5.3+)

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/MIGRATION.md

Example `main.js` configuration for integrating `@storybook/addon-knobs` in Storybook versions 5.3 and later, demonstrating the simplified addon registration using presets.

```js
module.exports = {
  stories: ["../**/*.stories.js"],
  addons: ["@storybook/addon-knobs"]
};
```

--------------------------------

### Storybook Addon Toolbar Tool with Toggle Functionality

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/storybook-addon-toolkit-types.md

This snippet demonstrates how to create a custom toolbar tool for a Storybook addon. It uses `useGlobals` to manage addon state, `useStorybookApi` to register keyboard shortcuts, and `IconButton` to render the tool. The tool toggles a global parameter and updates its active state, providing an interactive element in the Storybook UI.

```tsx
import React, { memo, useCallback, useEffect } from 'react';

import { useGlobals, useStorybookApi } from 'storybook/manager-api';
import { IconButton } from 'storybook/internal/components';
import { LightningIcon } from '@storybook/icons';

import { ADDON_ID, PARAM_KEY, TOOL_ID } from './constants';

export const Tool = memo(function MyAddonSelector() {
  const [globals, updateGlobals] = useGlobals();
  const api = useStorybookApi();

  const isActive = [true, 'true'].includes(globals[PARAM_KEY]);

  const toggleMyTool = useCallback(() => {
    updateGlobals({
      [PARAM_KEY]: !isActive,
    });
  }, [isActive]);

  useEffect(() => {
    api.setAddonShortcut(ADDON_ID, {
      label: 'Toggle Measure [O]',
      defaultShortcut: ['O'],
      actionName: 'outline',
      showInMenu: false,
      action: toggleMyTool,
    });
  }, [toggleMyTool, api]);

  return (
    <IconButton key={TOOL_ID} active={isActive} title="Enable my addon" onClick={toggleMyTool}>
      <LightningIcon />
    </IconButton>
  );
});
```

--------------------------------

### Install MSW and Storybook Addon

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/msw-addon-install.md

These commands install the `msw` package for API mocking and `msw-storybook-addon` to integrate MSW directly into your Storybook project. Use the command corresponding to your preferred package manager (npm, pnpm, or yarn) to add these development dependencies.

```sh
npm install msw msw-storybook-addon --save-dev
```

```sh
pnpm add msw msw-storybook-addon --save-dev
```

```sh
yarn add msw msw-storybook-addon --save-dev
```

--------------------------------

### Register Storybook Addon Themes

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/code/addons/themes/docs/getting-started/material-ui.md

Guide to include the `@storybook/addon-themes` addon in your `.storybook/main.js` configuration file to enable its functionality within Storybook.

```JavaScript
export default {
  stories: ['../src/**/*.mdx', '../src/**/*.stories.@(js|jsx|mjs|ts|tsx)'],
  addons: [
    '@storybook/addon-essentials',
+   '@storybook/addon-themes',
  ],
};
```

--------------------------------

### Install and Configure Storybook Vitest Addon

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/writing-tests/integrations/vitest-addon.mdx

This command automatically installs and configures the `@storybook/addon-vitest` package, integrating Vitest for component testing within Storybook. It handles initial setup for Vite and Vitest, applying sensible defaults to your project.

```bash
npx storybook add @storybook/addon-vitest
```

--------------------------------

### Configure Storybook Parameters for Pseudo States

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/addons/configure-addons.mdx

This JavaScript snippet demonstrates how to define a story in Storybook and configure parameters for the `pseudo` addon, specifically enabling the `hover` state for a component. Parameters allow global, component, or story-level configuration of addon behavior, accessible via the `useParameter` hook.

```js
export const Hover = {
  render: () => <Button>Label</Button>,
  parameters: { pseudo: { hover: true } },
};
```

--------------------------------

### Implement Storybook Addon Theme Panel in React

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/addon-consume-globaltype.md

This React component, `ThemePanel`, integrates with Storybook's addon system. It uses `useGlobals` to access the global `theme` state, fetches the corresponding theme object using `getTheme`, and renders its JSON representation within an `AddonPanel`. It provides a visual representation of the active theme's structure, including a placeholder if no theme is selected.

```js
import React from 'react';

import { useGlobals } from 'storybook/manager-api';

import {
  AddonPanel,
  Placeholder,
  Separator,
  Source,
  Spaced,
  Title,
} from 'storybook/internal/components';

import { MyThemes } from '../my-theme-folder/my-theme-file';

// Function to obtain the intended theme
const getTheme = (themeName) => {
  return MyThemes[themeName];
};

const ThemePanel = (props) => {
  const [{ theme: themeName }] = useGlobals();

  const selectedTheme = getTheme(themeName);

  return (
    <AddonPanel {...props}>
      {selectedTheme ? (
        <Spaced row={3} outer={1}>
          <Title>{selectedTheme.name}</Title>
          <p>The full theme object</p>
          <Source
            code={JSON.stringify(selectedTheme, null, 2)}
            language="js"
            copyable
            padded
            showLineNumbers
          />
        </Spaced>
      ) : (
        <Placeholder>No theme selected</Placeholder>
      )}
    </AddonPanel>
  );
};
```

--------------------------------

### Registering a Storybook Manager Panel Addon in JavaScript

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/storybook-addon-panel-initial.md

This snippet demonstrates how to register a new panel in the Storybook manager UI. It uses `addons.register` to define the addon and `addons.add` to create a panel of type `types.PANEL`, rendering a simple React component within an `AddonPanel`.

```JavaScript
import React from 'react';

import { addons, types } from 'storybook/manager-api';

import { AddonPanel } from 'storybook/internal/components';

const ADDON_ID = 'myaddon';
const PANEL_ID = `${ADDON_ID}/panel`;

addons.register(ADDON_ID, (api) => {
  addons.add(PANEL_ID, {
    type: types.PANEL,
    title: 'My Addon',
    render: ({ active }) => (
      <AddonPanel active={active}>
        <div> Storybook addon panel </div>
      </AddonPanel>
    )
  });
});
```

--------------------------------

### Registering a Storybook Addon and Accessing Query Parameters

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/storybook-addons-api-getqueryparam.md

This snippet shows how to register a new addon with Storybook's manager API. It demonstrates accessing a query parameter using `api.getQueryParam()` within the addon's registration callback.

```JavaScript
addons.register('my-organisation/my-addon', (api) => {
  api.getQueryParam('exampleParameter');
});
```

--------------------------------

### Registering a Storybook Tab Addon

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/MIGRATION.md

Demonstrates how to register a TAB type addon using `addons.register` and `addons.add`. It highlights that `match` or `route` properties are no longer specified for TAB addons, as Storybook automatically handles routing based on the addon's ID.

```tsx
import { addons, types } from "@storybook/manager-api";

addons.register("my-addon", () => {
  addons.add("my-addon/tab", {
    type: types.TAB,
    title: "My Addon",
    render: () => <div>Hello World</div>
  });
});
```

--------------------------------

### Storybook Addon Tool Component (src/Tool.tsx)

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/addons/writing-addons.mdx

Defines the main `Tool` component, which serves as the entry point for the Storybook toolbar addon. It manages the addon's active state using `useGlobals`, interacts with the Storybook API to register a keyboard shortcut, and renders an `IconButton` to toggle the addon's functionality.

```ts
export const Tool = memo(function MyAddonSelector() {
  const [globals, updateGlobals] = useGlobals();
  const api = useStorybookApi();

  const isActive = [true, 'true'].includes(globals[PARAM_KEY]);

  const toggleMyTool = useCallback(() => {
    updateGlobals({
      [PARAM_KEY]: !isActive,
    });
  }, [isActive]);

  useEffect(() => {
    api.setAddonShortcut(ADDON_ID, {
      label: 'Toggle Addon [8]',
      defaultShortcut: ['8'],
      actionName: 'myaddon',
      showInMenu: false,
      action: toggleMyTool,
    });
  }, [toggleMyTool, api]);

  return (
    <IconButton key={TOOL_ID} active={isActive} title="Enable my addon" onClick={toggleMyTool}>
      <LightningIcon />
    </IconButton>
  );
});
```

--------------------------------

### Registering a Storybook Addon and Tool (TypeScript)

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/storybook-addon-manager-initial-state.md

This TypeScript snippet demonstrates how to register a new addon in Storybook's manager UI. It uses `addons.register` to define the addon's entry point and then `addons.add` to introduce a specific tool. The tool's configuration includes its type (`types.TOOL`), display title, a `match` function to control its visibility based on Storybook's UI state (e.g., only in 'story' view mode and without an active tab), and the React component (`Tool`) responsible for rendering its UI.

```typescript
import { addons, types } from 'storybook/manager-api';
import { ADDON_ID, TOOL_ID } from './constants';
import { Tool } from './Tool';

// Register the addon
addons.register(ADDON_ID, () => {
  // Register the tool
  addons.add(TOOL_ID, {
    type: types.TOOL,
    title: 'My addon',
    match: ({ tabId, viewMode }) => !tabId && viewMode === 'story',
    render: Tool,
  });
});
```

--------------------------------

### Install Storybook Webpack 5 SWC Compiler Addon

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/storybook-addon-compiler-swc-auto-install.md

These commands demonstrate how to install the `@storybook/addon-webpack5-compiler-swc` addon for Storybook. This addon integrates SWC for faster compilation with Webpack 5 in Storybook projects. Choose the command corresponding to your preferred package manager.

```shell
npx storybook@latest add @storybook/addon-webpack5-compiler-swc
```

```shell
pnpm dlx storybook@latest add @storybook/addon-webpack5-compiler-swc
```

```shell
yarn dlx storybook@latest add @storybook/addon-webpack5-compiler-swc
```

--------------------------------

### Configure Storybook `main.js` with presets and addon options

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/MIGRATION.md

This example extends the `main.js` configuration to include Storybook presets and pass specific options to registered addons. It illustrates how to integrate advanced features and customize addon behavior directly within the main configuration file.

```javascript
module.exports = {
  stories: ["../**/*.stories.js"],
  addons: [
    "@storybook/preset-create-react-app",
    {
      name: "@storybook/addon-docs",
      options: { configureJSX: true }
    }
  ]
};
```

--------------------------------

### Register Event Handler with Storybook API

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/addons/addons-api.mdx

This method allows you to register a handler function called whenever the user navigates between stories.

```APIDOC
api.on(eventName, fn)
```

--------------------------------

### Register Storybook Addon and Select Story (JavaScript)

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/storybook-addons-api-selectstory.md

Registers a new Storybook addon with a unique ID ('my-organisation/my-addon') and uses the provided Storybook API instance to programmatically select a specific story ('Button', 'Default') when the addon is initialized. This code typically resides in a manager-side file for the addon.

```javascript
addons.register('my-organisation/my-addon', (api) => {
  api.selectStory('Button', 'Default');
});
```

--------------------------------

### Register Storybook Addon and Set Query Parameters (JavaScript)

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/storybook-addons-api-setqueryparams.md

This snippet demonstrates how to register a new Storybook addon using `addons.register`. Inside the registration callback, it accesses the `api` object to call `api.setQueryParams`, which allows setting or updating URL query parameters for the Storybook manager UI. This is useful for controlling addon behavior or state via the URL.

```JavaScript
addons.register('my-organisation/my-addon', (api) => {
  api.setQueryParams({
    exampleParameter: 'Sets the example parameter value',
    anotherParameter: 'Sets the another parameter value'
  });
});
```

--------------------------------

### Registering a Storybook Panel Addon

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/storybook-addon-panel-example.md

This JavaScript code snippet shows how to register a new panel addon in Storybook. It uses `addons.register` to define the addon and `addons.add` to configure its properties, including its title, type (`types.PANEL`), and a React `render` function to display its content. The `AddonPanel` component is used to wrap the panel's UI.

```JavaScript
import React from 'react';

import { AddonPanel } from 'storybook/internal/components';

import { useGlobals, addons, types } from 'storybook/manager-api';

addons.register('my/panel', () => {
  addons.add('my-panel-addon/panel', {
    title: 'Example Storybook panel',
    //ðŸ‘‡ Sets the type of UI element in Storybook
    type: types.PANEL,
    render: ({ active }) => (
      <AddonPanel active={active}>
        <h2>I'm a panel addon in Storybook</h2>
      </AddonPanel>
    )
  });
});
```

--------------------------------

### Registering a Storybook Manager Addon Panel

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/docs/_snippets/storybook-addon-disable-addon.md

This JavaScript code registers a new Storybook manager addon. It defines a panel with a specific ID, title, and a render function to display custom content within the Storybook UI. The `paramKey` is also shown.

```JavaScript
addons.register(ADDON_ID, () => {
  addons.add(PANEL_ID, {
    type: types.PANEL,
    title: 'My Addon',
    render: () => <div>Addon tab content</div>,
    paramKey: 'myAddon'
  });
});
```

--------------------------------

### Storybook Info Addon: Flow Type Declaration Comments

Source: https://github.com/storybookjs/storybook/blob/v9.0.15/code/__mocks__/inject-decorator.stories.txt

Shows how `@storybook/addon-info` extracts comments from Flow type declarations to display them in the prop table within the Storybook Info Addon.

```JavaScript
import React from 'react';
import { storiesOf } from '@storybook/react';
import { withInfo } from '@storybook/addon-info';

import FlowTypeButton from '../components/FlowTypeButton';

storiesOf('Addons|Info.React Docgen', module)
  .add(
    'Comments from Flow declarations',
    withInfo(
      'Comments above the Flow declarations should be extracted from the React component file itself and rendered in the Info Addon prop table'
    )(() => <FlowTypeButton label="Flow Typed Button" />)
  );
```