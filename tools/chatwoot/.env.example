# Chatwoot Environment Configuration
# Copy this file to .env and fill in your actual values

# ============================================================================
# REQUIRED VARIABLES
# ============================================================================

# Chatwoot Base URL (must match your domain)
CHATWOOT_BASE_URL=https://chatwoot.ozean-licht.dev

# Rails Secret Key (generate with: openssl rand -hex 64)
SECRET_KEY_BASE=change_me_generate_with_openssl_rand_hex_64

# PostgreSQL Configuration
CHATWOOT_POSTGRES_DATABASE=chatwoot
CHATWOOT_POSTGRES_USERNAME=chatwoot
CHATWOOT_POSTGRES_PASSWORD=change_me_generate_secure_password

# Redis Configuration
CHATWOOT_REDIS_PASSWORD=change_me_generate_secure_password

# SMTP Configuration (for email notifications)
CHATWOOT_SMTP_ADDRESS=smtp.example.com
CHATWOOT_SMTP_PORT=587
CHATWOOT_SMTP_USERNAME=support@ozean-licht.at
CHATWOOT_SMTP_PASSWORD=change_me_smtp_password
CHATWOOT_SMTP_DOMAIN=ozean-licht.at

# Webhook Secret (generate with: openssl rand -hex 32)
# This must match the value in apps/admin/.env
CHATWOOT_WEBHOOK_SECRET=change_me_generate_with_openssl_rand_hex_32

# Email Sender
CHATWOOT_MAILER_SENDER_EMAIL=support@ozean-licht.at

# ============================================================================
# OPTIONAL VARIABLES (with defaults)
# ============================================================================

# Chatwoot Version (default: latest)
CHATWOOT_VERSION=latest

# Port Configuration (default: 3000)
CHATWOOT_PORT=3000

# Storage Configuration (default: local)
# Use 'local' for file storage or 's3' for S3-compatible storage
ACTIVE_STORAGE_SERVICE=local

# ============================================================================
# S3 STORAGE CONFIGURATION (Optional - for production deployments)
# ============================================================================

# S3 Bucket Name
CHATWOOT_S3_BUCKET_NAME=

# AWS Access Credentials
CHATWOOT_AWS_ACCESS_KEY_ID=
CHATWOOT_AWS_SECRET_ACCESS_KEY=

# AWS Region
CHATWOOT_AWS_REGION=eu-central-1

# S3 Endpoint (for S3-compatible services like MinIO, Hetzner Storage Box)
CHATWOOT_S3_ENDPOINT=

# ============================================================================
# SMTP ADVANCED SETTINGS (Optional)
# ============================================================================

CHATWOOT_SMTP_AUTHENTICATION=plain
CHATWOOT_SMTP_ENABLE_STARTTLS_AUTO=true
CHATWOOT_SMTP_OPENSSL_VERIFY_MODE=none

# Inbound Email Domain (for email channel support)
CHATWOOT_MAILER_INBOUND_EMAIL_DOMAIN=

# ============================================================================
# SECURITY SETTINGS
# ============================================================================

# Force SSL in production (default: false, set to true for production)
CHATWOOT_FORCE_SSL=false

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Disable public account signups (default: false)
CHATWOOT_ENABLE_ACCOUNT_SIGNUP=false

# Use inbox avatar for bot messages (default: true)
CHATWOOT_USE_INBOX_AVATAR_FOR_BOT=true

# ============================================================================
# PERFORMANCE TUNING
# ============================================================================

# Rails max threads (default: 5)
CHATWOOT_RAILS_MAX_THREADS=5

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================

# Log level: debug, info, warn, error (default: info)
CHATWOOT_LOG_LEVEL=info

# Log size (default: 500)
CHATWOOT_LOG_SIZE=500

# ============================================================================
# TELEMETRY
# ============================================================================

# Disable telemetry reporting to Chatwoot (default: false)
CHATWOOT_TELEMETRY_ENABLED=false

# ============================================================================
# QUICK START COMMANDS
# ============================================================================
#
# Generate secrets:
#   echo "SECRET_KEY_BASE=$(openssl rand -hex 64)"
#   echo "CHATWOOT_WEBHOOK_SECRET=$(openssl rand -hex 32)"
#   echo "CHATWOOT_POSTGRES_PASSWORD=$(openssl rand -base64 32)"
#   echo "CHATWOOT_REDIS_PASSWORD=$(openssl rand -base64 32)"
#
# Copy this file:
#   cp .env.example .env
#
# Edit with your values:
#   nano .env  # or vim .env
#
# Start services:
#   docker compose up -d
#
# Initialize database:
#   docker compose exec chatwoot-web bundle exec rails db:chatwoot_prepare
#
# Create admin user:
#   docker compose exec chatwoot-web bundle exec rails runner "User.create!(email: 'admin@ozean-licht.at', password: 'SecurePassword123!', name: 'Admin', confirmed_at: Time.now, role: :administrator)"
#
# Check logs:
#   docker compose logs -f
#
